{"version":3,"file":"angular-doka.js","sources":["../../../src/angular-doka/v9/projects/angular-doka/src/lib/doka-image-editor-abstract.component.ts","../../../src/angular-doka/v9/projects/angular-doka/src/lib/doka-image-editor.component.ts","../../../src/angular-doka/v9/projects/angular-doka/src/lib/doka-image-editor-modal.component.ts","../../../src/angular-doka/v9/projects/angular-doka/src/lib/doka-image-editor-overlay.component.ts","../../../src/angular-doka/v9/projects/angular-doka/src/lib/angular-doka.module.ts","../../../../src/angular-doka/v9/projects/angular-doka/src/public-api.ts","../../../../src/angular-doka/v9/projects/angular-doka/src/angular-doka.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter, ElementRef, NgZone, OnInit } from '@angular/core';\n\nimport { ImageSource, DokaImageEditorOptions, DokaImageEditor, dispatchEditorEvents } from 'doka';\n\n@Component({\n    selector: 'doka-image-editor',\n    template: ` <ng-content></ng-content> `,\n    styles: [],\n})\nexport class DokaImageEditorAbstractComponent implements OnInit {\n    protected element: ElementRef;\n    protected editor: DokaImageEditor;\n    protected zone: NgZone;\n    private unsubs: Function[] = [];\n\n    @Input() src: ImageSource = undefined;\n    @Input() options: DokaImageEditorOptions = undefined;\n\n    @Output() loadstart: EventEmitter<any> = new EventEmitter();\n    @Output() loaderror: EventEmitter<any> = new EventEmitter();\n    @Output() loadprogress: EventEmitter<any> = new EventEmitter();\n    @Output() load: EventEmitter<any> = new EventEmitter();\n    @Output() processstart: EventEmitter<any> = new EventEmitter();\n    @Output() processerror: EventEmitter<any> = new EventEmitter();\n    @Output() processprogress: EventEmitter<any> = new EventEmitter();\n    @Output() process: EventEmitter<any> = new EventEmitter();\n    @Output() undo: EventEmitter<any> = new EventEmitter();\n    @Output() redo: EventEmitter<any> = new EventEmitter();\n    @Output() revert: EventEmitter<any> = new EventEmitter();\n    @Output() destroy: EventEmitter<any> = new EventEmitter();\n    @Output() show: EventEmitter<any> = new EventEmitter();\n    @Output() hide: EventEmitter<any> = new EventEmitter();\n    @Output() close: EventEmitter<any> = new EventEmitter();\n\n    constructor(element: ElementRef, zone: NgZone) {\n        this.element = element;\n        this.zone = zone;\n    }\n\n    private routeEvent: EventHandlerNonNull = (e: CustomEvent) => {\n        const emitter = this[e.type.split(':')[1]];\n        if (!emitter) return;\n        emitter.emit(e.detail);\n    };\n\n    protected initEditor(element: HTMLElement, props: any): DokaImageEditor {\n        return undefined;\n    }\n\n    ngAfterViewInit(): void {\n        this.element.nativeElement.classList.add('DokaRootWrapper');\n        // will block angular from listening to events inside doka\n        this.zone.runOutsideAngular(() => {\n            this.editor = this.initEditor(\n                this.element.nativeElement,\n                Object.assign({}, this.options, { src: this.src })\n            );\n            this.unsubs = dispatchEditorEvents(this.editor, this.element.nativeElement);\n        });\n\n        // route events\n        Object.keys(this)\n            .filter((key) => this[key] instanceof EventEmitter)\n            .forEach((key) => {\n                this.element.nativeElement.addEventListener(`doka:${key}`, this.routeEvent);\n            });\n    }\n\n    ngOnChanges() {\n        if (!this.editor) return;\n        Object.assign(this.editor, this.options, { src: this.src });\n    }\n\n    ngOnDestroy() {\n        if (!this.editor) return;\n\n        this.editor.destroy();\n\n        // unsubscribe\n        this.unsubs.forEach((unsub) => unsub());\n        this.unsubs = [];\n\n        // unroute events\n        Object.keys(this)\n            .filter((key) => this[key] instanceof EventEmitter)\n            .forEach((key) => {\n                this.element.nativeElement.removeEventListener(`doka:${key}`, this.routeEvent);\n            });\n\n        this.editor = undefined;\n    }\n\n    ngOnInit(): void {}\n}\n","import { Component, OnInit } from '@angular/core';\n\nimport { appendEditor } from 'doka';\nimport { DokaImageEditorAbstractComponent } from './doka-image-editor-abstract.component';\n\n@Component({\n    selector: 'doka-image-editor',\n    template: ` <ng-content></ng-content> `,\n    styles: [],\n})\nexport class DokaImageEditorComponent extends DokaImageEditorAbstractComponent implements OnInit {\n    initEditor(element, props) {\n        return appendEditor(element, props);\n    }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { openEditor, DokaImageEditorModal } from 'doka';\nimport { DokaImageEditorAbstractComponent } from './doka-image-editor-abstract.component';\n\n@Component({\n    selector: 'doka-image-editor-modal',\n    template: ` <ng-content></ng-content> `,\n    styles: [],\n})\nexport class DokaImageEditorModalComponent\n    extends DokaImageEditorAbstractComponent\n    implements OnInit {\n    initEditor(element, props) {\n        return openEditor(props);\n    }\n\n    showEditor() {\n        (this.editor as DokaImageEditorModal).show();\n    }\n\n    hideEditor() {\n        (this.editor as DokaImageEditorModal).hide();\n    }\n\n    ngOnDestroy() {\n        if (!this.editor) return;\n        this.editor = undefined;\n    }\n}\n","import { Component, OnInit } from '@angular/core';\n\nimport { overlayEditor } from 'doka';\nimport { DokaImageEditorAbstractComponent } from './doka-image-editor-abstract.component';\n\n@Component({\n    selector: 'doka-image-editor-overlay',\n    template: ` <ng-content></ng-content> `,\n    styles: [],\n})\nexport class DokaImageEditorOverlayComponent\n    extends DokaImageEditorAbstractComponent\n    implements OnInit {\n    initEditor(element, props) {\n        return overlayEditor(element, props);\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { DokaImageEditorComponent } from './doka-image-editor.component';\nimport { DokaImageEditorModalComponent } from './doka-image-editor-modal.component';\nimport { DokaImageEditorOverlayComponent } from './doka-image-editor-overlay.component';\n\n@NgModule({\n    declarations: [\n        DokaImageEditorComponent,\n        DokaImageEditorModalComponent,\n        DokaImageEditorOverlayComponent,\n    ],\n    imports: [],\n    exports: [\n        DokaImageEditorComponent,\n        DokaImageEditorModalComponent,\n        DokaImageEditorOverlayComponent,\n    ],\n})\nexport class AngularDokaModule {}\n","/*\n * Public API Surface of angular-doka\n */\n\nexport * from './lib/doka-image-editor.component';\nexport * from './lib/doka-image-editor-modal.component';\nexport * from './lib/doka-image-editor-overlay.component';\nexport * from './lib/angular-doka.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {DokaImageEditorAbstractComponent as Éµa} from './lib/doka-image-editor-abstract.component';"],"names":[],"mappings":"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"}