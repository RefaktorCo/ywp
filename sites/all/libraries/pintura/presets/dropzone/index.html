<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf8" />
        <meta name="viewport" content="width=device-width" />

        <title>Dropzone</title>

        <link rel="icon" href="favicon.ico" />

        <link rel="stylesheet" href="https://unpkg.com/dropzone/dist/dropzone.css" />
        <link rel="stylesheet" href="./pintura/pintura.css" />
    </head>
    <body>
        <div class="dropzone" id="pinturaDropzone"></div>

        <script src="https://unpkg.com/dropzone"></script>
        <script src="./useEditorWithDropzone-iife.js"></script>

        <script type="module">
            import {
                // editor
                openEditor,
                createDefaultImageReader,
                createDefaultImageWriter,
                locale_en_gb,

                // plugins
                setPlugins,
                plugin_crop,
                plugin_crop_locale_en_gb,
                plugin_filter,
                plugin_filter_defaults,
                plugin_filter_locale_en_gb,
                plugin_finetune,
                plugin_finetune_defaults,
                plugin_finetune_locale_en_gb,
                plugin_annotate,
                plugin_annotate_locale_en_gb,
                markup_editor_defaults,
                markup_editor_locale_en_gb,
            } from './pintura/pintura.js';

            setPlugins(plugin_crop, plugin_filter, plugin_finetune, plugin_annotate);

            // Create a Dropzone
            Dropzone.options.pinturaDropzone = useEditorWithDropzone(
                // method to create editor
                openEditor,
                // editor properties
                {
                    imageReader: createDefaultImageReader(),
                    imageWriter: createDefaultImageWriter(),
                    ...plugin_filter_defaults,
                    ...plugin_finetune_defaults,
                    ...markup_editor_defaults,
                    locale: {
                        ...locale_en_gb,
                        ...plugin_crop_locale_en_gb,
                        ...plugin_filter_locale_en_gb,
                        ...plugin_finetune_locale_en_gb,
                        ...plugin_annotate_locale_en_gb,
                        ...markup_editor_locale_en_gb,
                    },
                },
                // dropzone options
                {
                    url: '/post',
                    addRemoveLinks: true,
                }
            );
        </script>
    </body>
</html>
